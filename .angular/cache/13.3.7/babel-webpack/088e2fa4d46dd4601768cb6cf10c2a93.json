{"ast":null,"code":"import _asyncToGenerator from \"H:\\\\code\\\\RECORDP\\\\ANGULAR\\\\Project CarWebApi\\\\CarProject1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { HttpEventType, HttpRequest } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class ServicecarService {\n  constructor(httpP, router) {\n    this.httpP = httpP;\n    this.router = router;\n    this.url = \"https://localhost:44377/api/\";\n    this.working = false;\n    this.uploadFileLabel = 'Choose an image to upload';\n  }\n\n  getAllCars() {\n    this.httpP.get(\"https://localhost:44377/api/car\").toPromise().then(res => {\n      this.carsall = res;\n      console.log(\"---------- CAR -----------\");\n      console.log(res);\n    });\n  }\n\n  getUrlImage(filename) {\n    return this.url.replace(\"api/\", \"\") + \"images/\" + filename;\n  }\n\n  getCar(id) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return yield _this.httpP.get(_this.url + \"car/\" + id).toPromise().then(res => {\n        return res;\n      });\n    })();\n  }\n\n  addCar(newCar) {\n    const headers = {\n      'content-type': 'application/json'\n    };\n    const body = JSON.stringify(newCar);\n    this.httpP.post(this.url + \"car\", body, {\n      'headers': headers\n    }).toPromise().then(r => {\n      this.router.navigate(['car']);\n    });\n  }\n\n  editCar(id, updatePerson) {\n    const headers = {\n      'content-type': 'application/json'\n    };\n    const body = JSON.stringify(updatePerson);\n    this.httpP.put(this.url + \"car/\" + id, body, {\n      'headers': headers\n    }).toPromise();\n    this.router.navigate(['car']);\n  }\n\n  deleteCar(id) {\n    this.httpP.delete(this.url + \"car/\" + id).toPromise();\n    this.router.navigate(['car']);\n  }\n\n  getPersonA() {\n    return this.httpP.get(this.url + \"person\").subscribe(res => {\n      console.log(\"=============== ALL P ================\");\n      console.log(res);\n      this.personA = res;\n    });\n  }\n\n  upload() {\n    if (!this.uploadFile) {\n      alert('Choose a file to upload first');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(this.uploadFile.name, this.uploadFile);\n    const url = this.url + \"car/UplodFile\";\n    const uploadReq = new HttpRequest('POST', url, formData, {\n      reportProgress: true\n    });\n    this.uploadUrl = '';\n    this.uploadProgress = 0;\n    this.working = true;\n    this.httpP.request(uploadReq).subscribe(event => {\n      if (event.type === HttpEventType.UploadProgress) {\n        this.uploadProgress = Math.round(100 * event.loaded / event.total);\n      } else if (event.type === HttpEventType.Response) {\n        this.uploadUrl = event.body.url;\n      }\n    }, error => {\n      console.error(error);\n    }).add(() => {\n      this.working = false;\n    });\n  }\n\n}\n\nServicecarService.ɵfac = function ServicecarService_Factory(t) {\n  return new (t || ServicecarService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\n\nServicecarService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ServicecarService,\n  factory: ServicecarService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["H:/code/RECORDP/ANGULAR/Project CarWebApi/CarProject1/src/app/models/servicecar.service.ts"],"names":["HttpEventType","HttpRequest","i0","i1","i2","ServicecarService","constructor","httpP","router","url","working","uploadFileLabel","getAllCars","get","toPromise","then","res","carsall","console","log","getUrlImage","filename","replace","getCar","id","addCar","newCar","headers","body","JSON","stringify","post","r","navigate","editCar","updatePerson","put","deleteCar","delete","getPersonA","subscribe","personA","upload","uploadFile","alert","formData","FormData","append","name","uploadReq","reportProgress","uploadUrl","uploadProgress","request","event","type","UploadProgress","Math","round","loaded","total","Response","error","add","ɵfac","ServicecarService_Factory","t","ɵɵinject","HttpClient","Router","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { HttpEventType, HttpRequest } from '@angular/common/http';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"@angular/router\";\r\nexport class ServicecarService {\r\n    constructor(httpP, router) {\r\n        this.httpP = httpP;\r\n        this.router = router;\r\n        this.url = \"https://localhost:44377/api/\";\r\n        this.working = false;\r\n        this.uploadFileLabel = 'Choose an image to upload';\r\n    }\r\n    getAllCars() {\r\n        this.httpP.get(\"https://localhost:44377/api/car\").toPromise().then(res => {\r\n            this.carsall = res;\r\n            console.log(\"---------- CAR -----------\");\r\n            console.log(res);\r\n        });\r\n    }\r\n    getUrlImage(filename) {\r\n        return this.url.replace(\"api/\", \"\") + \"images/\" + filename;\r\n    }\r\n    async getCar(id) {\r\n        return await this.httpP.get(this.url + \"car/\" + id).toPromise().then(res => {\r\n            return res;\r\n        });\r\n    }\r\n    addCar(newCar) {\r\n        const headers = { 'content-type': 'application/json' };\r\n        const body = JSON.stringify(newCar);\r\n        this.httpP.post(this.url + \"car\", body, { 'headers': headers }).toPromise().then(r => {\r\n            this.router.navigate(['car']);\r\n        });\r\n    }\r\n    editCar(id, updatePerson) {\r\n        const headers = { 'content-type': 'application/json' };\r\n        const body = JSON.stringify(updatePerson);\r\n        this.httpP.put(this.url + \"car/\" + id, body, { 'headers': headers }).toPromise();\r\n        this.router.navigate(['car']);\r\n    }\r\n    deleteCar(id) {\r\n        this.httpP.delete(this.url + \"car/\" + id).toPromise();\r\n        this.router.navigate(['car']);\r\n    }\r\n    getPersonA() {\r\n        return this.httpP.get(this.url + \"person\").subscribe(res => {\r\n            console.log(\"=============== ALL P ================\");\r\n            console.log(res);\r\n            this.personA = res;\r\n        });\r\n    }\r\n    upload() {\r\n        if (!this.uploadFile) {\r\n            alert('Choose a file to upload first');\r\n            return;\r\n        }\r\n        const formData = new FormData();\r\n        formData.append(this.uploadFile.name, this.uploadFile);\r\n        const url = this.url + \"car/UplodFile\";\r\n        const uploadReq = new HttpRequest('POST', url, formData, {\r\n            reportProgress: true,\r\n        });\r\n        this.uploadUrl = '';\r\n        this.uploadProgress = 0;\r\n        this.working = true;\r\n        this.httpP.request(uploadReq).subscribe((event) => {\r\n            if (event.type === HttpEventType.UploadProgress) {\r\n                this.uploadProgress = Math.round((100 * event.loaded) / event.total);\r\n            }\r\n            else if (event.type === HttpEventType.Response) {\r\n                this.uploadUrl = event.body.url;\r\n            }\r\n        }, (error) => {\r\n            console.error(error);\r\n        }).add(() => {\r\n            this.working = false;\r\n        });\r\n    }\r\n}\r\nServicecarService.ɵfac = function ServicecarService_Factory(t) { return new (t || ServicecarService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router)); };\r\nServicecarService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServicecarService, factory: ServicecarService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}